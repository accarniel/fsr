<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function implements two approaches for evaluating the query window inference on a fuzzy spatial inference (FSI) model.
Given a query window (i.e., a rectangular object), it returns a set of inferred points inside this window
that satisfy a specific condition (e.g., target linguistic value, or maximum/minimum inferred values)."><title>Evaluating a query window inference — fsi_qw_eval • fsr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Evaluating a query window inference — fsi_qw_eval"><meta property="og:description" content="This function implements two approaches for evaluating the query window inference on a fuzzy spatial inference (FSI) model.
Given a query window (i.e., a rectangular object), it returns a set of inferred points inside this window
that satisfy a specific condition (e.g., target linguistic value, or maximum/minimum inferred values)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fsr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/accarniel/fsr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Evaluating a query window inference</h1>
      <small class="dont-index">Source: <a href="https://github.com/accarniel/fsr/blob/HEAD/R/fsi_functions.R" class="external-link"><code>R/fsi_functions.R</code></a></small>
      <div class="d-none name"><code>fsi_qw_eval.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function implements two approaches for evaluating the query window inference on a fuzzy spatial inference (FSI) model.
Given a query window (i.e., a rectangular object), it returns a set of inferred points inside this window
that satisfy a specific condition (e.g., target linguistic value, or maximum/minimum inferred values).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fsi_qw_eval</span><span class="op">(</span><span class="va">fsi</span>, <span class="va">qw</span>, approach <span class="op">=</span> <span class="st">"discretization"</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fsi</dt>
<dd><p>An FSI model built with the <code>fsi_create</code> function that is populated by the following functions <code>fsi_add_fsa</code>, <code>fsi_add_cs</code>, and <code>fsi_add_rules</code>.</p></dd>


<dt>qw</dt>
<dd><p>An <code>sfg</code> object storing the query window that is supposed to be used as input for the inference. It has to be an axis-aligned rectangle represented by a simple polygon object of 5 points (since the last coordinate pair closes the external ring of the rectangle).</p></dd>


<dt>approach</dt>
<dd><p>Defines which approach is employed to perform the query window inference: <code>“discretization”</code> or <code>“pso”</code>. Default value is `"discretization"``</p></dd>


<dt>...</dt>
<dd><p>&lt;<code><a href="https://rlang.r-lib.org/reference/dyn-dots.html" class="external-link">dynamic-dots</a></code>&gt; Different set of parameters required depending on the chosen approach (see more in details below).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tibble in the format <code>(points, inferred_values)</code>, where <code>points</code> is an <code>sfc</code> object (i.e., a list of <code>sfg</code> objects of geometry type POINT) and <code>inferred_values</code> are inferred values in the domain of the consequent of the FSI model.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For the <em>discretization</em> approach, two additional parameters are needed and they have to be informed by using the three-dots parameter <code>...</code>:</p><ul><li><p><code>target_lval</code>: A character value that indicates the target linguistic value from the linguistic variable of the consequent.</p></li>
<li><p><code>k</code>: A numeric value that defines the number of points that will be captured from the query window and evaluated by the function <code>fsi_eval</code>. Its square root has to an integer value.   Alternatively, you can inform the number of columns and rows of the regular grid to be performed on the query window by informing numeric values for <code>n_col</code> and <code>n_row</code>, respectively. Thus, these parameters can be given instead of the number <code>k</code>.</p></li>
</ul><p>For the <em>pso</em> approach, it is necessary to set the following parameters:</p><ul><li><p><code>what</code>: A character value that defines the user's goal, which can be either <strong>maximize</strong> or <strong>minimize</strong> inferred values. Thus, this parameter can be <code>“max”</code> and <code>“min”</code>, respectively. The default value is <code>“max”</code>.</p></li>
<li><p><code>max_depth</code>: A numeric value that refers to the number of times the user wants to split the query window. The default value is equal to 2. For instance, a <code>max_depth</code> = 2 results in the query window split into four sub quadrants, where the particle swarm optimization (PSO) algorithm will be applied to each one as its search space.
In addition, the PSO algorithm has its own set of parameters:</p></li>
<li><p><code>maxit</code>: A numeric value that defines the maximum number of iterations. Default value is 50.</p></li>
<li><p><code>population</code>: A numeric value that defines the number of particles. Default value is 10.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Creating the FSI model from an example implemented with the visitation function:</span></span></span>
<span class="r-in"><span><span class="va">fsi</span> <span class="op">&lt;-</span> <span class="fu"><a href="visitation.html">visitation</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Creating a vector of fuzzy rules; </span></span></span>
<span class="r-in"><span><span class="co">## note that we make use of the linguistic variables and linguistic values previously defined:</span></span></span>
<span class="r-in"><span><span class="va">rules</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"IF accommodation review is reasonable AND food safety is low </span></span></span>
<span class="r-in"><span><span class="st">  THEN visiting experience is awful"</span>,</span></span>
<span class="r-in"><span> <span class="st">"IF accommodation price is expensive AND accommodation review is reasonable </span></span></span>
<span class="r-in"><span><span class="st">   THEN visiting experience is awful"</span>,</span></span>
<span class="r-in"><span> <span class="st">"IF accommodation price is affordable AND accommodation review is good AND food safety is medium </span></span></span>
<span class="r-in"><span><span class="st">   THEN visiting experience is average"</span>,</span></span>
<span class="r-in"><span> <span class="st">"IF accommodation price is affordable AND accommodation review is excellent </span></span></span>
<span class="r-in"><span><span class="st">                                                                AND food safety is high </span></span></span>
<span class="r-in"><span><span class="st">   THEN visiting experience is great"</span>,</span></span>
<span class="r-in"><span> <span class="st">"IF accommodation price is cut-rate AND accommodation review is excellent AND food safety is high </span></span></span>
<span class="r-in"><span><span class="st">   THEN visiting experience is great"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Adding these rules to the FSI model previously instantiated:</span></span></span>
<span class="r-in"><span><span class="va">fsi</span> <span class="op">&lt;-</span> <span class="fu"><a href="fsi_add_rules.html">fsi_add_rules</a></span><span class="op">(</span><span class="va">fsi</span>, <span class="va">rules</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Defining the query window that is defined over an application domain</span></span></span>
<span class="r-in"><span><span class="va">pts_qw1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.92</span>, <span class="fl">40.68527</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.75</span>, <span class="fl">40.68527</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.75</span>, <span class="fl">40.75</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.92</span>, <span class="fl">40.75</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">73.92</span>, <span class="fl">40.68527</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">qw1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">pts_qw1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example using the discretization approach:</span></span></span>
<span class="r-in"><span><span class="va">dis_res</span> <span class="op">&lt;-</span> <span class="fu">fsi_qw_eval</span><span class="op">(</span><span class="va">fsi</span>, <span class="va">qw1</span>, approach <span class="op">=</span> <span class="st">"discretization"</span>, target_lval <span class="op">=</span> <span class="st">"great"</span>, k <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Example using the pso approach in two levels:</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">pso_res</span> <span class="op">&lt;-</span> <span class="fu">fsi_qw_eval</span><span class="op">(</span><span class="va">fsi</span>, <span class="va">qw1</span>, approach <span class="op">=</span> <span class="st">"pso"</span>, max_depth <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Anderson Carniel, Felippe Galdino, Juliana Philippsen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer></div>

  

  

  </body></html>

